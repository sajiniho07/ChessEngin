Problem01:
------------ start
import cv2
import numpy as np
import os
import pandas as pd

def get_file_count(folder_path):
    count = 0
    for filename in os.listdir(folder_path):
        if filename.endswith(".png"):
            count += 1
    return count

def crop_image_border(image):
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    thresh_value = 100
    _, thresh = cv2.threshold(gray, thresh_value, 255, cv2.THRESH_BINARY)
    contours, _ = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    largest_contour = max(contours, key=cv2.contourArea)
    x, y, w, h = cv2.boundingRect(largest_contour)
    croped_img = image[y:y+h, x:x+w]
    return croped_img

def get_similar_mask_cnt(image, mask):
    height, width, _ = image.shape
    square_size = height // 8
    similar_cnt = 0
    for i in range(8):
        for j in range(8):
            x = j * square_size
            y = i * square_size
            square_img = image[y:y+square_size, x:x+square_size]
            result = cv2.matchTemplate(square_img, mask, cv2.TM_CCOEFF_NORMED)
            threshold = 0.8
            if cv2.minMaxLoc(result)[1] >= threshold:
                similar_cnt += 1
    return similar_cnt

folder_path = "res/problem01/test"
predictions = []
images_count = get_file_count(folder_path)

for i in range(1, images_count + 1):
    img = cv2.imread(folder_path + f'/img{i}.png')
    new_img = crop_image_border(img)
    black_cnt = 0
    for j in range(1, 13):
        mask = cv2.imread(f'res/templates/black/{j}.png')
        black_cnt += get_similar_mask_cnt(new_img, mask)

    white_cnt = 0
    for j in range(1, 13):
        mask = cv2.imread(f'res/templates/white/{j}.png')
        white_cnt += get_similar_mask_cnt(new_img, mask)

    label = -1
    if white_cnt > black_cnt:
        label = 1
    elif black_cnt > white_cnt:
        label = 0
    
    predictions.append((f'img{i}', label))

headers = ['image', 'label']
df = pd.DataFrame(predictions)
df.to_csv('predictions.csv', index=False, header=headers)
------------ end
problem02
------------ start
import cv2
import os
import pandas as pd
import re

def count_files_with_extension(path, extension):
    return len([f for f in os.listdir(path) if f.endswith(extension)])

def crop_image_border(image):
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    thresh_value = 100
    _, thresh = cv2.threshold(gray, thresh_value, 255, cv2.THRESH_BINARY)
    contours, _ = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    largest_contour = max(contours, key=cv2.contourArea)
    x, y, w, h = cv2.boundingRect(largest_contour)
    cropped_img = image[y:y+h, x:x+w]
    return cropped_img


def get_similar_mask_cnt(image, mask):
    height, width, _ = image.shape
    square_size = height // 8
    similar_cnt = sum(1 for i in range(8) for j in range(8)
                       if cv2.minMaxLoc(cv2.matchTemplate(
                           image[i*square_size:(i+1)*square_size, j*square_size:(j+1)*square_size],
                           mask, 
                           cv2.TM_CCOEFF_NORMED))[1] >= 0.8)
    return similar_cnt

black_tem_path = "res/templates_prob_2/black/"
black_file_list = os.listdir(black_tem_path)

white_tem_path = "res/templates_prob_2/white/"
white_file_list = os.listdir(white_tem_path)

folder_path = "res/templates_prob_2/source"
predictions = []
images_count = count_files_with_extension(folder_path, ".png")

for i in range(1, images_count + 1):
    img = cv2.imread(os.path.join(folder_path, f'img ({i}).png'))
    new_img = crop_image_border(img)

    black_total_score = 0
    for filename in black_file_list:
        score = int(re.findall(r"(?<=_)\d+", filename)[0])
        mask = cv2.imread(os.path.join(black_tem_path, filename))
        similar_cnt = get_similar_mask_cnt(new_img, mask)
        black_total_score += (similar_cnt * score)

    white_total_score = 0
    for filename in white_file_list:
        score = int(re.findall(r"(?<=_)\d+", filename)[0])
        mask = cv2.imread(os.path.join(white_tem_path, filename))
        similar_cnt = get_similar_mask_cnt(new_img, mask)
        white_total_score += (similar_cnt * score)

    label = -1
    if white_total_score > black_total_score:
        label = 1
    elif black_total_score > white_total_score:
        label = 0
        
    predictions.append((f'img{i}', label))
    print(f'image: {i}', f' -- {label} -- tws: {white_total_score}', f' ---- tbs: {black_total_score}')

headers = ['image', 'label']
df = pd.DataFrame(predictions, columns=headers)
df.to_csv('predictions.csv', index=False)
------------ end